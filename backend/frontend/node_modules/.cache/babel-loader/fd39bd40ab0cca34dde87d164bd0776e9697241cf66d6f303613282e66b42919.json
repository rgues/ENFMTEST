{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ADD_ASSIGNATION, GET_ASSIGNATIONS, GET_USERS, GET_REQUESTS } from \"../store/types\";\nexport default {\n  name: \"AddAssignationComponent\",\n  async created() {\n    this.assignations = await this.$store.dispatch(GET_ASSIGNATIONS);\n    this.users = await this.$store.dispatch(GET_USERS);\n    this.requests = await this.$store.dispatch(GET_REQUESTS);\n    console.log(this.requests);\n    if (this.users && this.users.length) {\n      this.users = this.users.filter(item => item.role_id === 3);\n    }\n  },\n  onUpdated() {\n    console.log('updated');\n    if (this.assignations && this.assignations.length) {\n      this.assignations = this.assignations.filter(item => item.user_id === this.user_id);\n    }\n    console.log(this.user_id);\n    console.log(this.assignations);\n    if (this.requests && this.requests.length) {\n      this.requests = this.requests.filter(item => item.status === 'proccesing');\n    }\n    console.log(this.requests);\n\n    // remove request that is already assign to the user\n    if (this.assignations && this.assignations.length) {\n      this.assignations.map(assign => {\n        this.requests = this.requests.filter(item => assign.request_id !== item.id);\n      });\n    }\n  },\n  data() {\n    return {\n      request_id: \"\",\n      user_id: \"\",\n      comment: \"\",\n      assignError: \"\",\n      loading: false,\n      users: [],\n      requests: []\n    };\n  },\n  methods: {\n    saveAssignRequest(e) {\n      e.preventDefault();\n      this.loading = true;\n      const data = {\n        request_id: this.request_id,\n        user_id: this.user_id,\n        comment: this.comment\n      };\n      this.$store.dispatch(ADD_ASSIGNATION, data).then(data => {\n        this.loading = false;\n        if (data.status === \"success\") {\n          this.$router.push(\"/admin/dashboard/assignations\");\n        }\n      }).catch(data => {\n        this.loading = false;\n        if (data === \"error\") {\n          this.assignError = this.$store.state.request.message;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["ADD_ASSIGNATION","GET_ASSIGNATIONS","GET_USERS","GET_REQUESTS","name","created","assignations","$store","dispatch","users","requests","console","log","length","filter","item","role_id","onUpdated","user_id","status","map","assign","request_id","id","data","comment","assignError","loading","methods","saveAssignRequest","e","preventDefault","then","$router","push","catch","state","request","message"],"sources":["C:\\Users\\HP\\Desktop\\Etisalat\\client\\src\\modules\\AddAssignation.vue"],"sourcesContent":["\r\n<template>\r\n  <form class=\"m-10 p-5\">\r\n    <div class=\"mb-4\">\r\n      <h3 class=\"text-dark\">ASSIGN REQUEST</h3>\r\n    </div>\r\n\r\n    <div class=\"mb-3\">\r\n      <p class=\"alert alert-danger\" v-show=\"assignError\">{{ assignError }}</p>\r\n    </div>\r\n\r\n    \r\n    <div class=\"mb-3\">\r\n      <select class=\"form-control\" id=\"#it\" v-model=\"user_id\">\r\n        <option for=\"it\" value=\"\" :disabled=\"true\">\r\n          Select IT\r\n        </option>\r\n        <option for=\"it\" v-for=\"user in users\" :key=\"user.id\" :value=\"user.id\">\r\n          {{ user.firstname }}  {{ user.lastname }}\r\n        </option>\r\n      </select>\r\n    </div>\r\n\r\n    <div class=\"mb-3\" v-if=\"user_id\">\r\n      <select class=\"form-control\" id=\"#request\" v-model=\"request_id\">\r\n        <option for=\"request\" value=\"\" :disabled=\"true\">\r\n          Select Request\r\n        </option>\r\n        <option for=\"request\" v-for=\"req in requests\" :key=\"req.id\" :value=\"req.id\">\r\n          {{ req.description }} \r\n        </option>\r\n      </select>\r\n    </div>\r\n\r\n    <div class=\"mb-3\">\r\n      <textarea\r\n        rows=\"3\"\r\n        v-model=\"comment\"\r\n        class=\"form-control\"\r\n        id=\"passwordInput\"\r\n        placeholder=\"Enter a comment\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"mb-3\">\r\n      <button\r\n        :disabled=\"loading\"\r\n        @click=\"saveAssignRequest\"\r\n        class=\"btn btn-lg btn-dark\"\r\n        type=\"button\"\r\n      >\r\n        Save\r\n      </button>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport { ADD_ASSIGNATION,GET_ASSIGNATIONS, GET_USERS, GET_REQUESTS } from \"../store/types\";\r\n\r\nexport default {\r\n  name: \"AddAssignationComponent\",\r\n   async created() {\r\n\r\n     this.assignations = await this.$store.dispatch(GET_ASSIGNATIONS);\r\n     this.users = await this.$store.dispatch(GET_USERS);\r\n     this.requests = await this.$store.dispatch(GET_REQUESTS);\r\n    \r\n     \r\n       console.log( this.requests);\r\n\r\n      if (this.users &&  this.users.length) {\r\n         this.users = this.users.filter(item => item.role_id === 3);\r\n      }\r\n  },\r\n  onUpdated() {\r\n\r\n       console.log('updated')\r\n \r\n      if (this.assignations &&  this.assignations.length) {\r\n         this.assignations = this.assignations.filter(item => item.user_id === this.user_id);\r\n      }\r\n\r\n      console.log(this.user_id);\r\n      console.log(this.assignations);\r\n    \r\n    if (this.requests &&  this.requests.length) {\r\n        this.requests = this.requests.filter(item => item.status === 'proccesing');\r\n     }\r\n\r\n      console.log( this.requests);\r\n\r\n     // remove request that is already assign to the user\r\n     if (this.assignations &&  this.assignations.length) {\r\n         this.assignations.map((assign) => {\r\n                this.requests = this.requests.filter(item => assign.request_id !== item.id );\r\n         });\r\n     }\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      request_id: \"\",\r\n      user_id: \"\",\r\n      comment: \"\",\r\n      assignError: \"\",\r\n      loading: false,\r\n      users: [],\r\n      requests: []\r\n    };\r\n  },\r\n  methods: {\r\n    saveAssignRequest(e) {\r\n      e.preventDefault();\r\n      this.loading = true;\r\n      const data = {\r\n        request_id: this.request_id,\r\n        user_id: this.user_id,\r\n        comment: this.comment\r\n      };\r\n      this.$store\r\n        .dispatch(ADD_ASSIGNATION, data)\r\n        .then((data) => {\r\n          this.loading = false;\r\n          if (data.status === \"success\") {\r\n            this.$router.push(\"/admin/dashboard/assignations\");\r\n          }\r\n        })\r\n        .catch((data) => {\r\n          this.loading = false;\r\n          if (data === \"error\") {\r\n            this.assignError = this.$store.state.request.message;\r\n          }\r\n        });\r\n    },\r\n  },\r\n};\r\n\r\n</script>\r\n\r\n<style>\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}