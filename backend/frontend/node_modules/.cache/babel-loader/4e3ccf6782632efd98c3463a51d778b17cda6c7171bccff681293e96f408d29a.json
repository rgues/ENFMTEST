{"ast":null,"code":"import { GET_REQUESTS, GET_ASSIGNATIONS, GET_CATEGORIES, GET_REQUEST_ANSWERS, GET_USERS } from \"../store/types\";\nimport { format } from \"date-fns\";\nimport store from \"../store\";\nimport { onMounted, ref, watchEffect } from \"vue\";\nimport { useRoute } from 'vue-router';\nexport default {\n  __name: 'RequestResponses',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const categories = ref([]);\n    const users = ref([]);\n    const requests = ref([]);\n    const assignations = ref([]);\n    const answers = ref([]);\n    const currentUser = ref(null);\n    onMounted(async () => {\n      categories.value = await store.dispatch(GET_CATEGORIES);\n      users.value = await store.dispatch(GET_USERS);\n      requests.value = await store.dispatch(GET_REQUESTS);\n      assignations.value = await store.dispatch(GET_ASSIGNATIONS);\n      answers.value = await store.dispatch(GET_REQUEST_ANSWERS, route.params.id);\n      currentUser.value = store.state.user.loginData.user;\n    });\n    watchEffect(() => route.params.id, async newId => {\n      answers.value = await store.dispatch(GET_REQUEST_ANSWERS, newId);\n    });\n    function categoryName(id) {\n      return id ? categories.value.filter(item => parseInt(item.id) === parseInt(id)).map(item => item ? item.name : \"\")[0] : \"\";\n    }\n    function request(id) {\n      return id ? requests.value.find(item => parseInt(item.id) === parseInt(id)) : null;\n    }\n    function assignation(id) {\n      return id ? assignations.value.find(item => parseInt(item.id) === parseInt(id)) : null;\n    }\n    function formatDate(date) {\n      return format(date, \"yyyy-MM-dd\");\n    }\n    const __returned__ = {\n      route,\n      categories,\n      users,\n      requests,\n      assignations,\n      answers,\n      currentUser,\n      categoryName,\n      request,\n      assignation,\n      formatDate,\n      get GET_REQUESTS() {\n        return GET_REQUESTS;\n      },\n      get GET_ASSIGNATIONS() {\n        return GET_ASSIGNATIONS;\n      },\n      get GET_CATEGORIES() {\n        return GET_CATEGORIES;\n      },\n      get GET_REQUEST_ANSWERS() {\n        return GET_REQUEST_ANSWERS;\n      },\n      get GET_USERS() {\n        return GET_USERS;\n      },\n      get format() {\n        return format;\n      },\n      get store() {\n        return store;\n      },\n      onMounted,\n      ref,\n      watchEffect,\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["GET_REQUESTS","GET_ASSIGNATIONS","GET_CATEGORIES","GET_REQUEST_ANSWERS","GET_USERS","format","store","onMounted","ref","watchEffect","useRoute","route","categories","users","requests","assignations","answers","currentUser","value","dispatch","params","id","state","user","loginData","newId","categoryName","filter","item","parseInt","map","name","request","find","assignation","formatDate","date"],"sources":["C:/Users/HP/Desktop/Projects/Customer_v2/frontend/src/views/RequestResponses.vue"],"sourcesContent":["<script setup>\r\nimport {\r\n  GET_REQUESTS,\r\n  GET_ASSIGNATIONS,\r\n  GET_CATEGORIES,\r\n  GET_REQUEST_ANSWERS,\r\n  GET_USERS,\r\n} from \"../store/types\";\r\nimport { format } from \"date-fns\";\r\nimport store from \"../store\";\r\nimport { onMounted, ref, watchEffect } from \"vue\";\r\nimport { useRoute } from 'vue-router'\r\n\r\nconst route = useRoute()\r\nconst categories = ref([]);\r\nconst users = ref([]);\r\nconst requests = ref([]);\r\nconst assignations = ref([]);\r\nconst answers = ref([]);\r\nconst currentUser = ref(null);\r\n\r\nonMounted(async () => {\r\n  categories.value = await store.dispatch(GET_CATEGORIES);\r\n  users.value = await store.dispatch(GET_USERS);\r\n  requests.value = await store.dispatch(GET_REQUESTS);\r\n  assignations.value = await store.dispatch(GET_ASSIGNATIONS);\r\n  answers.value = await store.dispatch(GET_REQUEST_ANSWERS, route.params.id);\r\n  currentUser.value = store.state.user.loginData.user;\r\n});\r\n\r\nwatchEffect(() => route.params.id,\r\n  async newId => {\r\n  answers.value = await store.dispatch(GET_REQUEST_ANSWERS, newId);\r\n})\r\n\r\nfunction categoryName(id) {\r\n  return id\r\n    ? categories.value\r\n        .filter((item) => parseInt(item.id) === parseInt(id))\r\n        .map((item) => (item ? item.name : \"\"))[0]\r\n    : \"\";\r\n}\r\n\r\nfunction request(id) {\r\n  return id\r\n    ? requests.value.find((item) => parseInt(item.id) === parseInt(id))\r\n    : null;\r\n}\r\n\r\nfunction assignation(id) {\r\n  return id\r\n    ? assignations.value.find((item) => parseInt(item.id) === parseInt(id))\r\n    : null;\r\n}\r\n\r\nfunction formatDate(date) {\r\n  return format(date, \"yyyy-MM-dd\");\r\n}\r\n</script>\r\n\r\n\r\n<template>\r\n  <div class=\"admin-container mt-5\">\r\n    <div className=\"admin_table\">\r\n      <table class=\"table\">\r\n        <thead>\r\n          <tr class=\"table-secondary\">\r\n            <th scope=\"col\">Ticket</th>\r\n            <th scope=\"col\">Category</th>\r\n            <th scope=\"col\">Description</th>\r\n            <th scope=\"col\">Status</th>\r\n            <th scope=\"col\">Comment</th>\r\n            <th scope=\"col\">Response</th>\r\n            <th scope=\"col\">IT</th>\r\n            <th scope=\"col\">Date</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr class=\"table-light\" v-for=\"item in answers\" :key=\"item.id\">\r\n            <td>\r\n              {{\r\n                assignation(item.assignation_id)\r\n                  ? request(assignation(item.assignation_id).request_id).title\r\n                  : \"\"\r\n              }}\r\n            </td>\r\n            <td>\r\n              <span class=\"fw-bold\">\r\n                {{\r\n                  assignation(item.assignation_id)\r\n                    ? categoryName(\r\n                        request(assignation(item.assignation_id).request_id)\r\n                          .category_id\r\n                      )\r\n                    : \"\"\r\n                }}\r\n              </span>\r\n            </td>\r\n\r\n            <td>\r\n              {{\r\n                assignation(item.assignation_id)\r\n                  ? request(assignation(item.assignation_id).request_id)\r\n                      .description\r\n                  : \"\"\r\n              }}\r\n            </td>\r\n            <td>\r\n              <span\r\n                :class=\"{\r\n                  'badge bg-danger': item.state === 'in_approval',\r\n                  'badge bg-success': item.state === 'approve',\r\n                }\"\r\n              >\r\n                {{ item.state }}\r\n              </span>\r\n            </td>\r\n            <td>\r\n              <span class=\"fs-6\">\r\n                {{\r\n                  assignation(item.assignation_id)\r\n                    ? assignation(item.assignation_id).comment\r\n                    : \"\"\r\n                }}\r\n              </span>\r\n            </td>\r\n\r\n            <td>{{ item.description ? item.description : \"\" }}</td>\r\n\r\n            <td>{{ item.name ? item.name : \"\" }}</td>\r\n\r\n            <td>{{ item.date_answer ? formatDate(item.date_answer) : \"\" }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"mappings":"AACA,SACEA,YAAY,EACZC,gBAAgB,EAChBC,cAAc,EACdC,mBAAmB,EACnBC,SAAS,QACJ,gBAAgB;AACvB,SAASC,MAAM,QAAQ,UAAU;AACjC,OAAOC,KAAK,MAAM,UAAU;AAC5B,SAASC,SAAS,EAAEC,GAAG,EAAEC,WAAW,QAAQ,KAAK;AACjD,SAASC,QAAQ,QAAQ,YAAY;;;;;;;IAErC,MAAMC,KAAK,GAAGD,QAAQ,CAAC,CAAC;IACxB,MAAME,UAAU,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMK,KAAK,GAAGL,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMM,QAAQ,GAAGN,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMO,YAAY,GAAGP,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMQ,OAAO,GAAGR,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMS,WAAW,GAAGT,GAAG,CAAC,IAAI,CAAC;IAE7BD,SAAS,CAAC,YAAY;MACpBK,UAAU,CAACM,KAAK,GAAG,MAAMZ,KAAK,CAACa,QAAQ,CAACjB,cAAc,CAAC;MACvDW,KAAK,CAACK,KAAK,GAAG,MAAMZ,KAAK,CAACa,QAAQ,CAACf,SAAS,CAAC;MAC7CU,QAAQ,CAACI,KAAK,GAAG,MAAMZ,KAAK,CAACa,QAAQ,CAACnB,YAAY,CAAC;MACnDe,YAAY,CAACG,KAAK,GAAG,MAAMZ,KAAK,CAACa,QAAQ,CAAClB,gBAAgB,CAAC;MAC3De,OAAO,CAACE,KAAK,GAAG,MAAMZ,KAAK,CAACa,QAAQ,CAAChB,mBAAmB,EAAEQ,KAAK,CAACS,MAAM,CAACC,EAAE,CAAC;MAC1EJ,WAAW,CAACC,KAAK,GAAGZ,KAAK,CAACgB,KAAK,CAACC,IAAI,CAACC,SAAS,CAACD,IAAI;IACrD,CAAC,CAAC;IAEFd,WAAW,CAAC,MAAME,KAAK,CAACS,MAAM,CAACC,EAAE,EAC/B,MAAMI,KAAK,IAAI;MACfT,OAAO,CAACE,KAAK,GAAG,MAAMZ,KAAK,CAACa,QAAQ,CAAChB,mBAAmB,EAAEsB,KAAK,CAAC;IAClE,CAAC,CAAC;IAEF,SAASC,YAAYA,CAACL,EAAE,EAAE;MACxB,OAAOA,EAAE,GACLT,UAAU,CAACM,KAAK,CACbS,MAAM,CAAEC,IAAI,IAAKC,QAAQ,CAACD,IAAI,CAACP,EAAE,CAAC,KAAKQ,QAAQ,CAACR,EAAE,CAAC,CAAC,CACpDS,GAAG,CAAEF,IAAI,IAAMA,IAAI,GAAGA,IAAI,CAACG,IAAI,GAAG,EAAG,CAAC,CAAC,CAAC,CAAC,GAC5C,EAAE;IACR;IAEA,SAASC,OAAOA,CAACX,EAAE,EAAE;MACnB,OAAOA,EAAE,GACLP,QAAQ,CAACI,KAAK,CAACe,IAAI,CAAEL,IAAI,IAAKC,QAAQ,CAACD,IAAI,CAACP,EAAE,CAAC,KAAKQ,QAAQ,CAACR,EAAE,CAAC,CAAC,GACjE,IAAI;IACV;IAEA,SAASa,WAAWA,CAACb,EAAE,EAAE;MACvB,OAAOA,EAAE,GACLN,YAAY,CAACG,KAAK,CAACe,IAAI,CAAEL,IAAI,IAAKC,QAAQ,CAACD,IAAI,CAACP,EAAE,CAAC,KAAKQ,QAAQ,CAACR,EAAE,CAAC,CAAC,GACrE,IAAI;IACV;IAEA,SAASc,UAAUA,CAACC,IAAI,EAAE;MACxB,OAAO/B,MAAM,CAAC+B,IAAI,EAAE,YAAY,CAAC;IACnC"},"metadata":{},"sourceType":"module","externalDependencies":[]}