{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { format } from 'date-fns';\nimport { GET_REQUESTS, GET_CATEGORIES, GET_USERS } from '../store/types';\nimport { onMounted, ref } from 'vue';\nimport store from '../store';\nconst currentUser = null;\nexport default {\n  __name: 'Request',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const requests = ref([]);\n    const categories = ref([]);\n    const users = ref([]);\n    onMounted(async () => {\n      requests.value = await store.dispatch(GET_REQUESTS);\n      categories.value = await store.dispatch(GET_CATEGORIES);\n      users.value = await store.dispatch(GET_USERS);\n      currentUser.value = store.state.user.loginData.user;\n    });\n    function categoryName(id) {\n      return categories.value.filter(item => item.id === id).map(item => item ? item.name : '')[0];\n    }\n    function userName(id) {\n      return this.users.filter(item => item.id === id).map(item => item ? item.firstname + ' ' + item.lastname : '')[0];\n    }\n    function responseRequest(item) {\n      this.$router.push(`/admin/dashboard/requestResponses/${item.id}`);\n    }\n    function formatDate(date) {\n      return format(date, \"yyyy-MM-dd\");\n    }\n    const __returned__ = {\n      requests,\n      categories,\n      users,\n      currentUser,\n      categoryName,\n      userName,\n      responseRequest,\n      formatDate,\n      get format() {\n        return format;\n      },\n      get GET_REQUESTS() {\n        return GET_REQUESTS;\n      },\n      get GET_CATEGORIES() {\n        return GET_CATEGORIES;\n      },\n      get GET_USERS() {\n        return GET_USERS;\n      },\n      onMounted,\n      ref,\n      get store() {\n        return store;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["format","GET_REQUESTS","GET_CATEGORIES","GET_USERS","onMounted","ref","store","currentUser","requests","categories","users","value","dispatch","state","user","loginData","categoryName","id","filter","item","map","name","userName","firstname","lastname","responseRequest","$router","push","formatDate","date"],"sources":["C:/Users/HP/Desktop/ENFM/Customer_v2/client/src/views/Request.vue"],"sourcesContent":["\r\n<script setup>\r\nimport { format } from 'date-fns';\r\nimport { GET_REQUESTS , GET_CATEGORIES, GET_USERS} from '../store/types';\r\nimport { onMounted, ref } from 'vue';\r\nimport store from '../store'\r\n\r\n  const requests = ref([])\r\n  const categories = ref([])\r\n  const users = ref([]);\r\n  const currentUser = null;\r\n\r\n  onMounted(async () => { \r\n      requests.value = await store.dispatch(GET_REQUESTS);\r\n      categories.value = await store.dispatch(GET_CATEGORIES);\r\n      users.value = await store.dispatch(GET_USERS);\r\n      currentUser.value = store.state.user.loginData.user\r\n  })\r\n\r\n  function categoryName(id) {\r\n    return categories.value.filter(item => item.id === id)\r\n                           .map(item=>item ? item.name : '')[0];\r\n  }\r\n  \r\n  function userName(id) {\r\n    return this.users.filter(item => item.id === id)\r\n                     .map(item=>item ? item.firstname + ' ' + item.lastname : '')[0];\r\n  }\r\n  \r\n  function responseRequest(item) {\r\n    this.$router.push(`/admin/dashboard/requestResponses/${item.id}`);\r\n  }\r\n    \r\n  function formatDate(date) {\r\n    return format(date,\"yyyy-MM-dd\");\r\n  }\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"admin-container mt-5\">\r\n    <div className=\"admin_table\">\r\n      <table class=\"table\" >\r\n        <thead>\r\n          <tr class=\"table-secondary\">\r\n            <th scope=\"col\">Ticket</th>\r\n            <th scope=\"col\">Category</th>\r\n            <th scope=\"col\">Description</th>\r\n            <th scope=\"col\">Status</th>\r\n            <th scope=\"col\">Sender</th>\r\n            <th scope=\"col\">Date</th>\r\n            <th scope=\"col\">Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n           <tr class=\"table-light\" v-for=\"item in requests\" :key=\"item.id\" >\r\n                    <td>\r\n                      <span class=\"fw-bold\" >{{item.title}}</span>\r\n                    </td>\r\n                    <td>{{categoryName(item.category_id) }}</td>\r\n                    <td>{{item.description}}</td>\r\n                    <td>\r\n                      <span :class=\"{'badge bg-danger':item.status==='proccesing', 'badge bg-success':item.status==='done' }\">\r\n                        {{item.status}}\r\n                      </span> \r\n                      </td>\r\n                    <td>{{ currentUser.id === item.user_id ? currentUser.firstname + ' '  + currentUser.lastname :  userName(item.user_id) }}</td>\r\n                    \r\n                    <td>{{item.date_request ? formatDate(item.date_request) : ''}}</td>\r\n                    <td>\r\n                        <button @click=\"responseRequest(item)\" :disabled=\"item.status==='proccesing'\" :class=\"{ 'btn btn-small btn-light':item.status==='proccesing' , \r\n                        'btn btn-small btn-secondary':item.status==='done' }\" >\r\n                            Responses\r\n                        </button>\r\n                    </td>\r\n               </tr> \r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n"],"mappings":";AAEA,SAASA,MAAM,QAAQ,UAAU;AACjC,SAASC,YAAY,EAAGC,cAAc,EAAEC,SAAS,QAAO,gBAAgB;AACxE,SAASC,SAAS,EAAEC,GAAG,QAAQ,KAAK;AACpC,OAAOC,KAAK,MAAM,UAAU;AAK1B,MAAMC,WAAW,GAAG,IAAI;;;;;;;IAHxB,MAAMC,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,UAAU,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMK,KAAK,GAAGL,GAAG,CAAC,EAAE,CAAC;IAGrBD,SAAS,CAAC,YAAY;MAClBI,QAAQ,CAACG,KAAK,GAAG,MAAML,KAAK,CAACM,QAAQ,CAACX,YAAY,CAAC;MACnDQ,UAAU,CAACE,KAAK,GAAG,MAAML,KAAK,CAACM,QAAQ,CAACV,cAAc,CAAC;MACvDQ,KAAK,CAACC,KAAK,GAAG,MAAML,KAAK,CAACM,QAAQ,CAACT,SAAS,CAAC;MAC7CI,WAAW,CAACI,KAAK,GAAGL,KAAK,CAACO,KAAK,CAACC,IAAI,CAACC,SAAS,CAACD,IAAI;IACvD,CAAC,CAAC;IAEF,SAASE,YAAYA,CAACC,EAAE,EAAE;MACxB,OAAOR,UAAU,CAACE,KAAK,CAACO,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACF,EAAE,KAAKA,EAAE,CAAC,CAC9BG,GAAG,CAACD,IAAI,IAAEA,IAAI,GAAGA,IAAI,CAACE,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAC7D;IAEA,SAASC,QAAQA,CAACL,EAAE,EAAE;MACpB,OAAO,IAAI,CAACP,KAAK,CAACQ,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACF,EAAE,KAAKA,EAAE,CAAC,CAC9BG,GAAG,CAACD,IAAI,IAAEA,IAAI,GAAGA,IAAI,CAACI,SAAS,GAAG,GAAG,GAAGJ,IAAI,CAACK,QAAQ,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAClF;IAEA,SAASC,eAAeA,CAACN,IAAI,EAAE;MAC7B,IAAI,CAACO,OAAO,CAACC,IAAI,CAAE,qCAAoCR,IAAI,CAACF,EAAG,EAAC,CAAC;IACnE;IAEA,SAASW,UAAUA,CAACC,IAAI,EAAE;MACxB,OAAO7B,MAAM,CAAC6B,IAAI,EAAC,YAAY,CAAC;IAClC"},"metadata":{},"sourceType":"module","externalDependencies":[]}